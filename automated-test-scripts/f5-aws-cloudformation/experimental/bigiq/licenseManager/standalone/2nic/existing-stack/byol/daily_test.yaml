---
name: AWS standalone <NIC COUNT>NIC-BIGIQ-LICMGMT <LICENSE TYPE> <IMAGE NAME> <INSTANCE TYPE> <REGION> <BRANCH>
onStart:
- ../../../../../../../common/create_s3_bucket.sh
- ./create_stack.sh
- ../../../../../../../../sleep/3_minutes.sh
- ../../../../../../../common/verify_create.sh
- ../../../../../../../../sleep/15_minutes.sh
- ../../../../../../../common/verify_onboard_bigiq.sh
- ../../../../../../../common/verify_registration_key.sh
- ../../../../../../../common/verify_reg_pool_keys.sh
- ../../../../../../../common/verify_lic_pool_keys.sh
- ../../../../../../../common/verify_ntp.sh
- ../../../../../../../common/verify_time_zone.sh
- ../../../../../../../common/capture_logs_bigiq.sh
- ../../../../../../../common/delete_s3_bucket.sh
- ../../../../../../../common/delete_stack.sh
- ../../../../../../../../sleep/3_minutes.sh
- ../../../../../../../common/verify_delete.sh
onFail:
- ../../../../../../../common/capture_logs_bigiq.sh
- ../../../../../../../common/delete_s3_bucket.sh
- ../../../../../../../common/delete_stack.sh
- ../../../../../../../../sleep/3_minutes.sh
- ../../../../../../../common/verify_delete.sh
params:
- tag: VPC
  values:
  - value: vpc-317aaf55
    when:
      tag: REGION
      values:
      - us-west-1
  - value: vpc-dc1b85bb
    when:
      tag: REGION
      values:
      - us-west-2
  - value: vpc-867dcbe0
    when:
      tag: REGION
      values:
      - us-east-1
  - value: vpc-3f0f8056
    when:
      tag: REGION
      values:
      - us-east-2
  - value: vpc-8ceb59eb
    when:
      tag: REGION
      values:
      - eu-west-1
- tag: STACK TYPE
  values:
  - existing-stack
- tag: SOLUTION TYPE
  values:
  - standalone
- tag: ANALYTICS
  values:
  - No
  - No
  - No
  - No
  - No
  - No
  - No
  - No
  - No
  - No
  - Yes
- tag: IMAGE NAME
  values:
  - Best
- tag: INSTANCE TYPE
  values:
  - m4.xlarge
  - m4.2xlarge
  - m4.4xlarge
- tag: LICENSE PARAM
  values:
  - value: ParameterKey=licenseKey1,ParameterValue=<AUTOFILL BIGIQ LICENSE KEY>
    when:
      tag: LICENSE TYPE
      values:
      - byol
- tag: LICENSE POOL KEYS
  values:
  - License Pool
  - Do Not Create
- tag: LIC POOL KEYS
  values:
  - value: ParameterKey=licensePoolKeys,ParameterValue=PoolName1:<AUTOFILL CLPV2 LICENSE KEY>
    when:
      tag: LICENSE POOL KEYS
      values:
      - License Pool
  - value: ParameterKey=licensePoolKeys,ParameterValue=DO_NOT_CREATE
    when:
      tag: LICENSE POOL KEYS
      values:
      - Do Not Create
- tag: REGISTRATION POOL KEYS
  values:
  - License Pool
  - Do Not Create
- tag: REG POOL KEYS PARAM
  values:
  - value: ParameterKey=regPoolKeys,ParameterValue=PoolName2:<AUTOFILL EVAL LICENSE KEY>
    when:
      tag: REGISTRATION POOL KEYS
      values:
      - License Pool
  - value: ParameterKey=regPoolKeys,ParameterValue=DO_NOT_CREATE
    when:
      tag: REGISTRATION POOL KEYS
      values:
      - Do Not Create
- tag: MULTI NIC SUBNET AZ1
  values:
  - value: subnet-f6533aad,subnet-30523b6b,subnet-b7553cec,subnet-3d533a66,subnet-37533a6c
    when:
      tag: REGION
      values:
      - us-west-1
  - value: subnet-e6a01f9f,subnet-28a01f51,subnet-7ea21d07,subnet-d0a31ca9,subnet-1aa31c63
    when:
      tag: REGION
      values:
      - us-west-2
  - value: subnet-51e7f37e,subnet-6eedf941,subnet-afe7f380,subnet-cbecf8e4,subnet-fcfaeed3
    when:
      tag: REGION
      values:
      - us-east-1
  - value: subnet-1e900c76,subnet-74900c1c,subnet-0d920e65,subnet-a59408cd,subnet-12900c7a
    when:
      tag: REGION
      values:
      - us-east-2
  - value: subnet-fa26fc9c,subnet-6227fd04,subnet-f923f99f,subnet-8421fbe2,subnet-b35a80d5
    when:
      tag: REGION
      values:
      - eu-west-1
- tag: NETWORK PARAM
  values:
  - value: ParameterKey=managementSubnetAz1,ParameterValue=<MGMT SUBNET AZ1>
    when:
      tag: NIC COUNT
      values:
      - 2
- tag: MGMT SUBNET AZ1
  values:
  - value: subnet-d9b06d82
    when:
      tag: REGION
      values:
      - us-west-1
  - value: subnet-ddfc4fba
    when:
      tag: REGION
      values:
      - us-west-2
  - value: subnet-3f324712
    when:
      tag: REGION
      values:
      - us-east-1
  - value: subnet-8a61fce3
    when:
      tag: REGION
      values:
      - us-east-2
- tag: NTP SERVER
  values:
  - 0.pool.ntp.org
- tag: SSH KEY
  values:
  - dewpt
- tag: SUBNET1 AZ1
  values:
  - value: subnet-69219531
    when:
      tag: REGION
      values:
      - us-west-1
  - value: subnet-dbfc4fbc
    when:
      tag: REGION
      values:
      - us-west-2
  - value: subnet-39324714
    when:
      tag: REGION
      values:
      - us-east-1
  - value: subnet-6064f909
    when:
      tag: REGION
      values:
      - us-east-2
  - value: subnet-d912a6be
    when:
      tag: REGION
      values:
      - eu-west-1
- tag: TIMEZONE
  values:
  - UTC
- tag: TEMPLATE NAME
  values:
  - value: f5-existing-stack-byol-2nic-bigiq-licmgmt.template
    when:
      tag: NIC COUNT
      values:
      - 2
- tag: REGION
  values:
  - us-east-1
  - us-east-2
  - us-west-1
  - us-west-2
  - eu-west-1
- tag: BRANCH
  values:
  - master
  - CY18R15
  - CY18R12
  - ESECLDTPLT-216-bigiq-clustering
  - R19-1
- tag: NIC COUNT
  values:
  - 2
- tag: TEMPLATE URL
  values:
  - https://raw.githubusercontent.com/F5Networks/f5-aws-cloudformation/<BRANCH>/experimental/bigiq/licenseManagement/standalone/<NIC COUNT>nic/existing-stack/<LICENSE TYPE>/<TEMPLATE NAME>
  - https://gitlab.f5net.com/cloudsolutions/f5-cloud-factory/raw/<BRANCH>/f5-aws-cloudformation/experimental/bigiq/licenseManagement/standalone/<NIC COUNT>nic/existing-stack/<LICENSE TYPE>/<TEMPLATE NAME>
- tag: WEBSERVER
  values:
  - 10.0.3.46
- tag: STACK NAME
  values:
  - dewpt-<LICENSE TYPE>-bigiq-licmgr-<NIC COUNT>-<BRANCH>-<DEWPOINT JOB ID>
- tag: LICENSE TYPE
  values:
  - byol
- tag: S3 ARN
  values:
  - arn:aws:s3:::bigiqtest/passworddb.txt